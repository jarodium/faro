const Engine = require("./modules/engine_utils");
const turf = require('@turf/turf');
//import * as turf from '@turf/helpers'

//var poly1 = Engine.calculateFOV({'long' :-7.9554464, 'lat':37.0100746},[-180,180],1,-90);
//var poly2 = Engine.calculateFOV({'long' :-7.9322, 'lat':37.0194},[-180,180],1,90);

var poly1 = turf.polygon([[
    [-7.9963859,37.0138077],
    [-7.9554464,37.0100746],
    [-7.9493506,37.0255263],
    [-7.9341391,37.0089947],
    [-7.918014,37.0100995],
    [-7.9060061,37.0239502],
    [-7.9236872,37.0422444],
    [-7.939523,37.0429306],
    [-7.9550154,37.0423815],
    [-7.964371,37.0471084],
    [-7.9735981,37.0497115],
    [-7.9758082,37.0457381],
    [-7.9756148,37.0383393],
    [-7.9778464,37.0255948],
    [-7.9905494,37.0225797],
    [-7.9963859,37.0138077],
]]);

var poly2 = turf.polygon([[
    [-7.9328707,37.0135491],
    [-7.9308912,37.0133992],
    [-7.9309234,37.01453],
    [-7.9309236,37.01453],
    [-7.9328653,37.01456],
    [-7.9328707,37.0135491]
]]);

var intersection = turf.intersect( poly1, poly2 );

console.log( intersection );
//turf.intersect([poly1], [poly2]);
//turf.polygonize(poly1);
process.exit(0);